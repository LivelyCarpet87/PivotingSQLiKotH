<html>
  <head>
    <style>
    * {
      box-sizing: border-box;
    }

    .row {
      display: -ms-flexbox; /* IE10 */
      display: flex;
      -ms-flex-wrap: wrap; /* IE10 */
      flex-wrap: wrap;
      padding: 0 0px;
    }

    /* Create equal columns that sits next to each other */
    .column {
      -ms-flex: 2.0%; /* IE10 */
      flex: 2.0%;
      max-width: 2.0%;
      padding: 0 0px;
    }

    .column img {
      margin-top: 0px;
      vertical-align: middle;
      width: 100%;
    }
    </style>
  </head>
  <body>
    {% if message is defined %}
    <script>
      alert("{{message}}");
    </script>
    {% endif %}
    <h1>Controlled by Team {{controlledBy.capitalize()}}!</h1>
    <p>Yes, your team controls this server now. Defend it well!</p>
    <h1>Device Info</h1>
    <p>Device ID: {{device}}</p>
    <h5>Username</h5>
    <p>{{username}}</p>
    <h5>Password</h5>
    <p>{{password}}</p>
    <br>
    <form action="/game" method="POST">
      <input type="hidden" id="action" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="regenPassword">
      <input type="submit" value="Regenerate Password">
    </form>
    <br>
    <h5>Map</h5>
    <div class="row">
      <!--Column 1-->
      <div class="column">
        <img src="/static/MapSprites/connector/LUCorner.png" style="width:100%">
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/Contested/Out/{{bd}}.png" style="width:100%"> <!--bd-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/connector/LD.png" style="width:100%">
      </div>
      <!--Column 2-->
      <div class="column">
        <img src="/static/MapSprites/connector/LU.png" style="width:100%">
        <img src="/static/MapSprites/AccessNodes/LU/{{c1}}.png" style="width:100%"> <!--c1-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/Contested/L/{{cd}}.png" style="width:100%"> <!--cd-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/AccessNodes/LD/{{d1}}.png" style="width:100%"> <!--d1-->
      </div>
      <!--Column 3-->
      <div class="column">
        <img src="/static/MapSprites/connector/horizontal2.png" style="width:100%">
        <img src="/static/MapSprites/connector/horizontal.png" style="width:100%">
        <img src="/static/MapSprites/DB/LDRU/{{c2}}.png" style="width:100%"> <!--c2-->
        <img src="/static/MapSprites/connector/horizontal.png" style="width:100%">
        <img src="/static/MapSprites/DB/LURD/{{d2}}.png" style="width:100%"> <!--d2-->
        <img src="/static/MapSprites/connector/horizontal.png" style="width:100%">
      </div>
      <!--Column 4-->
      <div class="column">
        <img src="/static/MapSprites/connector/UMid.png" style="width:100%">
        <img src="/static/MapSprites/Contested/U/{{bc}}.png" style="width:100%"> <!--bc-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/Special/{{sp}}.png" style="width:100%"> <!--sp-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/Contested/D/{{ad}}.png" style="width:100%"> <!--ad-->
      </div>
      <!--Column 5-->
      <div class="column">
        <img src="/static/MapSprites/connector/horizontal2.png" style="width:100%">
        <img src="/static/MapSprites/connector/horizontal.png" style="width:100%">
        <img src="/static/MapSprites/DB/LURD/{{b2}}.png" style="width:100%"> <!--b2-->
        <img src="/static/MapSprites/connector/horizontal.png" style="width:100%">
        <img src="/static/MapSprites/DB/LDRU/{{a2}}.png" style="width:100%"> <!--a2-->
        <img src="/static/MapSprites/connector/horizontal.png" style="width:100%">
      </div>
      <!--Column 6-->
      <div class="column">
        <img src="/static/MapSprites/connector/RU.png" style="width:100%">
        <img src="/static/MapSprites/AccessNodes/RU/{{b1}}.png" style="width:100%"> <!--b1-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/Contested/R/{{ab}}.png" style="width:100%"> <!--ab-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/AccessNodes/RD/{{a1}}.png" style="width:100%"> <!--a1-->
      </div>
      <!--Column 7-->
      <div class="column">
        <img src="/static/MapSprites/connector/RUCorner.png" style="width:100%">
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/Contested/Out/{{ac}}.png" style="width:100%"> <!--bd-->
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/connector/vertical.png" style="width:100%">
        <img src="/static/MapSprites/connector/RD.png" style="width:100%">
      </div>
    </div>
    <h5>Username Filter</h5>
    <p>{{usernameFilter}}</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="addUserFilter">
      <label for="item">Add Username Filter: </label>
      <br>
      <input type="text" id="item" name="item">
      <br>
      <input type="submit" value="Add">
    </form>
    <p>You can add only 1 item per takeover, unless your team is the original owner.
    The longer you remain in control, the more points you get every minute.</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="rmUserFilter">
      <label for="item">Remove Username Filter: </label>
      <br>
      <input type="text" id="item" name="item">
      <br>
      <input type="submit" value="Remove">
    </form>
    <br>
    <h5>Password Filter</h5>
    <p>{{passwordFilter}}</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="addPassFilter">
      <label for="item">Add Password Filter: </label>
      <br>
      <input type="text" id="item" name="item">
      <br>
      <input type="submit" value="Add">
    </form>
    <p>You can add only 1 item per takeover, unless your team is the original owner.
    The longer you remain in control, the more points you get every minute.</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="rmPassFilter">
      <label for="item">Remove Password Filter: </label>
      <br>
      <input type="text" id="item" name="item">
      <br>
      <input type="submit" value="Remove">
    </form>

    {% if queryFilter is defined %}
    <br>
    <h5>Query Filter</h5>
    <p>{{queryFilter}}</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="addQueryFilter">
      <label for="item">Add Query Filter: </label>
      <br>
      <input type="text" id="item" name="item">
      <br>
      <input type="submit" value="Add">
    </form>
    <p>You can add only 1 item per takeover, unless your team is the original owner.
       Filter items for queries must be longer than 2 characters and are capped at 13 items.
    The longer you remain in control, the more points you get every minute.</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="rmQueryFilter">
      <label for="item">Remove Query Filter: </label>
      <br>
      <input type="text" id="item" name="item">
      <br>
      <input type="submit" value="Remove">
    </form>
    <p>Service Enabled: {{queryEnabled}}</p>
    <form action="/game" method="POST">
      <input type="hidden" id="path" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="toggleQuery">
      <input type="submit" value="Toggle">
    </form>
    <p>You can get significantly more points if you leave queries on. Also, the
      simulated admin will forcibly re-enable it when they notice it is disabled.
    Keeping it on longer increases detection time. </p>
    {% endif %}

    {% if redirect is defined %}
    <script>
      window.location.replace("/game");
    </script>
    {% endif %}
    <h1>Go To Other Devices</h1>
    {% for item in pivots %}
    <form action="/game" method="POST">
      <input type="hidden" id="action" name="path" value="{{path}}">
      <input type="hidden" id="action" name="action" value="pivot">
      <input type="hidden" id="pivotTo" name="pivotTo" value="{{ item }}">
      <input type="submit" value="Go to to {{ item }}">
    </form>
    {% endfor %}
  </body>
</html>
